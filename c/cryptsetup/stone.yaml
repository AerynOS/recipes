#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : cryptsetup
version     : 2.7.4
release     : 3
homepage    : https://gitlab.com/cryptsetup/cryptsetup
upstreams   :
    - https://gitlab.com/cryptsetup/cryptsetup/-/archive/v2.7.4/cryptsetup-v2.7.4.tar.bz2 : fb625f0f266da9ac29b99d0b7c199a20c08fe6bb44e8263bfee229e1f6eab4ea
summary     : cryptsetup + LUKS
description : |
    cryptsetup + LUKS - open source disk encryption
license     :
    - CC0-1.0
    - GPL-2.0-or-later
    - LGPL-2.1-or-later
builddeps   :
    - binary(gettext)
    - pkgconfig(blkid)
    - pkgconfig(devmapper)
    - pkgconfig(json-c)
    - pkgconfig(libcrypto)
    - pkgconfig(libgcrypt)
    - pkgconfig(libssh)
    - pkgconfig(nettle)
    - pkgconfig(popt)
    - pkgconfig(pwquality)
    - pkgconfig(systemd)
    - pkgconfig(uuid)
environment : |
    # https://gitlab.com/cryptsetup/cryptsetup/-/issues/830
    export LDFLAGS="${LDFLAGS} -Wl,--undefined-version"
setup       : |
    %meson -Dasciidoc=disabled \
           -Dargon-implementation=internal
build       : |
    %meson_build
install     : |
    %meson_install
    rm -v %(installroot)%(libdir)/tmpfiles.d -rf
