#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : colord
version     : 1.4.8
release     : 6
homepage    : https://www.freedesktop.org/software/colord/releases
upstreams   :
    - https://www.freedesktop.org/software/colord/releases/colord-1.4.8.tar.xz : 21500bd68975312a7f0f3ce6019d9f75f42aacaa75ca7115ec720b5445406896
summary     : Making color management just work
description : |
    colord is a system service that makes it easy to manage, install and generate color profiles to accurately color manage input and output devices. This functionality is implemented as a system activated daemon called colord. Being system activated means that it's only started when the user is using a text mode or graphical tool.
license     :
    - GPL-2.0-or-later
builddeps   :
    - binary(msgfmt)
    # binary(spotread) argyllcms
    - binary(vapigen)
    - pkgconfig(bash-completion)
    - pkgconfig(colord-gtk)
    - pkgconfig(dbus-1)
    - pkgconfig(gio-2.0)
    - pkgconfig(gio-unix-2.0)
    - pkgconfig(glib-2.0)
    - pkgconfig(gmodule-2.0)
    - pkgconfig(gnome-desktop-3.0)
    - pkgconfig(gobject-introspection-1.0)
    - pkgconfig(gudev-1.0)
    - pkgconfig(gusb)
    - pkgconfig(lcms2)
    - pkgconfig(libsystemd)
    - pkgconfig(libudev)
    - pkgconfig(polkit-gobject-1)
    - pkgconfig(sane-backends)
    - pkgconfig(sqlite3)
    - pkgconfig(systemd)
    - pkgconfig(udev)
setup       : |
    %meson \
        -Ddocs=false \
        -Dman=false \
        -Ddaemon_user=colord \
        -Dsane=true \
        -Dvapi=true
build       : |
    %meson_build
install     : |
    %meson_install

    %tmpfiles "d /var/lib/colord/icc 0755 colord colord -"
    %install_file %(pkgdir)/colord.group %(installroot)%(libdir)/userdb/colord.group
    ln -s colord.group %(installroot)%(libdir)/userdb/124.group
    %install_file %(pkgdir)/colord.user %(installroot)%(libdir)/userdb/colord.user
    ln -s colord.user %(installroot)%(libdir)/userdb/124.user
packages    :
    - "%(name)-libs":
        summary: Color daemon library
        description: Color daemon library
        paths:
            - /usr/lib/libcolor*.so.*
            - /usr/lib/girepository-1.0/Color*-1.0.typelib

    - "%(name)-devel":
        paths:
            - /usr/share/vala/vapi/
