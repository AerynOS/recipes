#
# SPDX-FileCopyrightText: Â© 2020-2025 AerynOS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : cosmic-initial-setup
version     : 1.0.6.git+8cabf71
release     : 17
summary     : Cosmic Initial Setup
license     : GPL-3.0
homepage    : https://github.com/pop-os/cosmic-initial-setup
upstreams   :
    - git|https://github.com/pop-os/cosmic-initial-setup.git : 8cabf71f7fdc7ab9b815dc4e16ec59ecc74a0193
description : |
    Cosmic Desktop Intial Setup Application
builddeps   :
    - binary(git-lfs)
    - binary(just)
    - pkgconfig(flatpak)
    - pkgconfig(libinput)
    - pkgconfig(libudev)
    - pkgconfig(openssl)
    - pkgconfig(xkbcommon)
networking  : yes
setup       : |
    git remote set-url origin https://github.com/pop-os/cosmic-initial-setup.git
    git lfs install
    git lfs pull

    %patch %(pkgdir)/0001-Allow-xdg-directory-to-be-overridden.patch

    %cargo_fetch
build       : |
    %cargo_build
install     : |
    CARGO_TARGET_DIR="target/%(target_triple)" \
    XDG_INSTALL_DIR="%(datadir)/xdg" \
        just rootdir=%(installroot) install
