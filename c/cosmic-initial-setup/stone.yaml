#
# SPDX-FileCopyrightText: Â© 2020-2025 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : cosmic-initial-setup
version     : 1.0.0-beta1.1+git.0cec0a5
release     : 1
homepage    : https://github.com/pop-os/cosmic-initial-setup
upstreams   :
    - git|https://github.com/pop-os/cosmic-initial-setup.git : 0cec0a5b81bdbb355fd268aee2469a3e8206bc7c
summary     : Cosmic Initial Setup
description : |
    Cosmic Desktop Intial Setup Application
license     : GPL-3.0
builddeps   :
    - binary(git-lfs)
    - binary(just)
    - pkgconfig(flatpak)
    - pkgconfig(libinput)
    - pkgconfig(libudev)
    - pkgconfig(openssl)
    - pkgconfig(xkbcommon)
networking  : true
setup       : |
    git remote set-url origin https://github.com/pop-os/cosmic-initial-setup.git
    git lfs install
    git lfs pull

    %patch %(pkgdir)/0001-Allow-xdg-directory-to-be-overridden.patch

    %cargo_fetch
build       : |
    %cargo_build
install     : |
    CARGO_TARGET_DIR="target/%(target_triple)" \
    XDG_INSTALL_DIR="%(datadir)/xdg" \
        just rootdir=%(installroot) install
