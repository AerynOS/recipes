#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : libssh
version     : "0.12.0"
release     : 6
homepage    : https://www.libssh.org/
upstreams   :
    - https://www.libssh.org/files/0.12/libssh-0.12.0.tar.xz : 1a6af424d8327e5eedef4e5fe7f5b924226dd617ac9f3de80f217d82a36a7121
summary     : C library for SSHv2 protocol support
description : |
    libssh is a multiplatform C library implementing the SSHv2 protocol on client and server side. With libssh, you can remotely execute programs, transfer files, use a secure and transparent tunnel, manage public keys and much more
license     :
    - BSD-3-Clause
    - LGPL-2.1-or-later
    - MIT
builddeps   :
    - binary(doxygen)
    - binary(python)
    - pkgconfig(krb5-gssapi)
    - pkgconfig(openssl)
    - pkgconfig(zlib)
    # abimap?
checkdeps  :
    - cmake(cmocka)
    - libgcc # libgcc_s.so.1 must be installed for pthread_exit to work
setup       : |
    %cmake \
        -DUNIT_TESTING:BOOL=ON \
        -DWITH_GCRYPT:BOOL=OFF
build       : |
    %cmake_build
install     : |
    %cmake_install
check       : |
    # These tests probably need networking or a PTY
    %cmake_test \
        --exclude-regex 'torture_server_x11|torture_server_direct_tcpip'
