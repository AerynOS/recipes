#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : libunistring
version     : "1.4.2"
release     : 7
homepage    : https://www.gnu.org/software/libunistring/
upstreams   :
    # The upstream gnu source is terrible, use a mirror
    - https://mirror.kumi.systems/gnu/libunistring/libunistring-1.4.2.tar.gz: e82664b170064e62331962126b259d452d53b227bb4a93ab20040d846fec01d8
summary     : Library for manipulating Unicode strings and C strings
description : |
    Library for manipulating Unicode strings and C strings
license     : LGPL-3.0-or-later
emul32      : true
setup       : |
    # This reconfigure and the sed below are a workaround for an issue with dash 0.5.13
    %reconfigure \
        --disable-static
build       : |
    %make
install     : |
    %make_install
check       : |
    # Workaround for dash 0.5.13 bug
    sed -i "s|#!/bin/sh|#!/bin/bash|g" tests/test-error.sh

    %make check || (cat tests/test-suite.log && exit 1)
packages    :
    - "%(name)-docs":
        paths:
            - /usr/share/doc/*
