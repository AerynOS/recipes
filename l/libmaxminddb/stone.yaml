#
# SPDX-FileCopyrightText: Â© 2020-2025 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : libmaxminddb
version     : "1.13.2"
release     : 2
homepage    : https://maxmind.github.io/libmaxminddb/
upstreams   :
    - https://github.com/maxmind/libmaxminddb/releases/download/1.13.2/libmaxminddb-1.13.2.tar.gz : 2c7aac2f1d97eb8127ae58710731c232648e1f02244c49b36f9b64e5facebf90
summary     : C library for the MaxMind DB file format
description : |
    The libmaxminddb library provides a C library for reading MaxMind DB files, including the GeoIP2 databases from MaxMind. This is a custom binary format designed to facilitate fast lookups of IP addresses while allowing for great flexibility in the type of data associated with an address.
license     : Apache-2.0
setup       : |
    # Make the soname match the prior autotools build
    sed -i "s|VERSION \${MAXMINDDB_SOVERSION})|VERSION \${MAXMINDDB_SOVERSION} SOVERSION 0)|" CMakeLists.txt

    %patch %(pkgdir)/0001-Fix-pkgconfig.patch
    
    %cmake \
        -DBUILD_SHARED_LIBS=ON
build       : |
    %cmake_build
install     : |
    %cmake_install

    %install_dir %(installroot)/usr/share/man/
    cp -ar man/man* %(installroot)/usr/share/man/
