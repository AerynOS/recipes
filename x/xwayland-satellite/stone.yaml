#
# SPDX-FileCopyrightText: Â© 2020-2025 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : xwayland-satellite
version     : "0.8.1"
release     : 4
upstreams   :
    - https://github.com/Supreeeme/xwayland-satellite/archive/refs/tags/v0.8.1.tar.gz : 44d4ed941f99b88be6655d9c31db90d2a44e2deec52da7446237354508369caf
homepage    : https://github.com/Supreeeme/xwayland-satellite
license     : MPL-2.0
summary     : Rootless Xwayland integration for Wayland compositors
description : |
    xwayland-satellite grants rootless Xwayland integration to any Wayland
    compositor implementing xdg_wm_base and viewporter. This is particularly
    useful for compositors that (understandably) do not want to go through
    implementing support for rootless Xwayland themselves.
networking  : true
builddeps   :
    - pkgconfig(xcb-cursor)
rundeps     :
    - binary(Xwayland)
setup       : |
    %patch %(pkgdir)/0001-fix-binary-path.patch

    %cargo_fetch
build       : |
    %cargo_build --features systemd
install     : |
    %cargo_install

    %install_file resources/xwayland-satellite.service -t %(installroot)%(libdir)/systemd/user
    %install_file %(pkgdir)/xwayland-satellite.preset -t %(installroot)%(libdir)/systemd/user-preset
