#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : xfsprogs
version     : '6.16.0'
release     : 10
homepage    : https://xfs.wiki.kernel.org/
upstreams   :
    - https://mirrors.edge.kernel.org/pub/linux/utils/fs/xfs/xfsprogs/xfsprogs-6.16.0.tar.xz : fa7ba8c35cb988e7d65b7e7630fe9d0e17e8d79799d3b98db7e19f2b9b150506
summary     : Filesystem utilities for xfs filesystems
description : |
    Filesystem utilities for xfs filesystems
license     :
    - GPL-2.0-or-later
    - LGPL-2.1-or-later
builddeps   :
    - binary(file)
    - binary(msgfmt)
    - pkgconfig(blkid)
    - pkgconfig(devmapper)
    - pkgconfig(icu-i18n)
    - pkgconfig(inih)
    - pkgconfig(libedit)
    - pkgconfig(libsystemd)
    - pkgconfig(liburcu)
    - pkgconfig(uuid)
setup       : |
    %configure \
        --disable-static \
        --enable-editline=yes

    # Prevent rpath from ending up in the binaries
    sed -i 's|^hardcode_libdir_flag_spec=.*|hardcode_libdir_flag_spec=""|g' libtool
    sed -i 's|^runpath_var=LD_RUN_PATH|runpath_var=DIE_RPATH_DIE|g' libtool
build       : |
    %make
install     : |
    %make_install -j1 install install-dev \
        PKG_ROOT_SBIN_DIR=%(sbindir) PKG_LIB_DIR=%(libdir)
