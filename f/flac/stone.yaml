#
# SPDX-FileCopyrightText: Â© 2020-2025 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : flac
version     : 1.5.0
release     : 1
upstreams   :
    - https://github.com/xiph/flac/releases/download/1.5.0/flac-1.5.0.tar.xz : f2c1c76592a82ffff8413ba3c4a1299b6c7ab06c734dee03fd88630485c2b920
homepage    : https://xiph.org/flac/
license     :
    - BSD-3-Clause
    - GFDL-1.1-or-later
    - GPL-2.0-or-later
    - LGPL-2.1-or-later
summary     : Encoder/decoder for the Free Lossless Audio Codec
description : |
    FLAC stands for Free Lossless Audio Codec, an audio format similar to MP3, but lossless, meaning that audio is compressed in FLAC without any loss in quality.
builddeps   :
    - pkgconfig(ogg)
setup       : |
    # Shorten tests
    sed -i 's/FLAC__TEST_LEVEL=1/FLAC__TEST_LEVEL=0/' test/CMakeLists.txt

    %cmake \
        -DBUILD_SHARED_LIBS=ON
build       : |
    %cmake_build
install     : |
    %cmake_install
# check       : |
# Tests fail with error code 141 for an unknown reason
#     %cmake_test
packages    :
    - "%(name)-libs":
        summary: Libraries for the Free Lossless Audio Codec
        description: Libraries for the Free Lossless Audio Codec
        paths:
            - /usr/lib/lib*.so.*

    - "%(name)-devel":
        paths:
            - /usr/share/doc/FLAC/api
