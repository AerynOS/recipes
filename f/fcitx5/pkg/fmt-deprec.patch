--- a/src/lib/fcitx-utils/log.cpp
+++ b/src/lib/fcitx-utils/log.cpp
@@ -222,7 +222,8 @@ LogMessageBuilder::LogMessageBuilder(std::ostream &out, LogLevel l,
             auto floor = std::chrono::floor<std::chrono::seconds>(now);
             auto micro = std::chrono::duration_cast<std::chrono::microseconds>(
                 now - floor);
-            auto t = fmt::localtime(std::chrono::system_clock::to_time_t(now));
+            auto time_now = std::chrono::system_clock::to_time_t(now);
+            auto t = std::chrono::time_point(&time_now);
             auto timeString = fmt::format("{:%F %T}.{:06d}", t, micro.count());
             out_ << timeString << " ";
         } catch (...) {
