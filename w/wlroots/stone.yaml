#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : wlroots
version     : 0.19.0
release     : 6
homepage    : https://gitlab.freedesktop.org/wlroots/wlroots/
upstreams   :
    - https://gitlab.freedesktop.org/wlroots/wlroots/-/releases/0.19.0/downloads/wlroots-0.19.0.tar.gz : aefb0fe2633b0aad1d66123b2f41afab004fb625e2a7790492cdd39a805cac91
summary     : A modular Wayland compositor library
description : |
    Pluggable, composable, unopinionated modules for building a Wayland compositor.
license     :
    - MIT
builddeps   :
    # TODO: xcb-errors, libliftoff
    - binary(glslangValidator)
    - cmake(VulkanHeaders)
    - pkgconfig(cairo)
    - pkgconfig(egl)
    - pkgconfig(gbm)
    - pkgconfig(hwdata)
    - pkgconfig(lcms2)
    - pkgconfig(libdisplay-info)
    - pkgconfig(libdrm)
    - pkgconfig(libinput)
    - pkgconfig(libseat)
    - pkgconfig(libudev)
    - pkgconfig(pixman-1)
    - pkgconfig(vulkan)
    - pkgconfig(wayland-protocols)
    - pkgconfig(wayland-server)
    - pkgconfig(xcb-ewmh)
    - pkgconfig(xcb-renderutil)
    - pkgconfig(xkbcommon)
    - pkgconfig(xwayland)
rundeps     :
    - binary(Xwayland)
    - hwdata
setup       : |
    %meson
build       : |
    %meson_build
install     : |
    %meson_install

    # Create an unversioned symlink so we can continue to use `pkgconfig(wlroots)`
    ln -sv wlroots-$(echo %(version) | cut -d. -f1).$(echo %(version) | cut -d. -f2).pc %(installroot)/%(libdir)/pkgconfig/wlroots.pc
packages    :
    - "%(name)":
        paths:
            - /usr/lib/*.so
