#
# SPDX-FileCopyrightText: Â© 2025- AerynOS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : quickshell-git
version     : 0.2.1
release     : 1
homepage    : https://quickshell.outfoxxed.me/
upstreams   :
    - git|https://git.outfoxxed.me/quickshell/quickshell.git : 7a427ce1979ce7447e885c4f30129b40f3d466f5 # HEAD
summary     : Flexible toolkit for building desktop shells with QtQuick (git snapshot)
description : |
    Quickshell is a toolkit for building status bars, widgets, lockscreens, and other desktop components using QtQuick.
    This package is sourced from the upstream git repository and pinned to an immutable ref.
license     :
    - GPL-3.0-or-later
    - LGPL-3.0-or-later
    - GPL-3.0-only
    - LGPL-3.0-only
builddeps:
  - binary(git)
  - binary(pkgconf)
  - cmake(Qt6Qml)
  - cmake(Qt6ShaderTools)
  - cmake(Qt6Svg)
  - cmake(Qt6WaylandClientPrivate)
  - pkgconfig(CLI11)
  - pkgconfig(gbm)
  - pkgconfig(jemalloc)
  - pkgconfig(libdrm)
  - pkgconfig(libpipewire-0.3)
  - pkgconfig(pam)
  - pkgconfig(polkit-agent-1)
  - pkgconfig(wayland-client)
  - pkgconfig(wayland-cursor)
  - pkgconfig(wayland-egl)
  - pkgconfig(wayland-protocols)
  - pkgconfig(xkbcommon)
  - spirv-tools
setup       : |
    %cmake -DDISTRIBUTOR="AerynOS (quickshell-git)" \
           -DDISTRIBUTOR_DEBUGINFO_AVAILABLE=NO \
           -DCMAKE_BUILD_TYPE=RelWithDebInfo \
           -DINSTALL_QML_PREFIX="lib/qt6/qml" \
           -DCRASH_REPORTER=OFF \
           -DCMAKE_C_FLAGS="-pthread" \
           -DCMAKE_CXX_FLAGS="-pthread"
build       : |
    %cmake_build
install     : |
    %cmake_install
