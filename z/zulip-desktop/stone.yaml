#
# SPDX-FileCopyrightText: Â© 2020-2025 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : zulip-desktop
version     : 5.12.3
release     : 2
upstreams   :
    - https://github.com/zulip/zulip-desktop/archive/v5.12.3.tar.gz : f9da4a31973ca8efb53ddb3dc3ab94b70238c0bc7a922e830279daaf90c3676f
homepage    : https://zulipchat.com
license     : Apache-2.0
summary     : Desktop client for Zulip
description : |
    Real-time team chat based on the email threading model
networking  : yes
builddeps   :
    - binary(pnpm)
setup       : |
    %patch %(pkgdir)/0001-Disable-auto-update.patch

    pnpm install --frozen-lockfile
build       : |
    pnpm --run pack
install     : |
    zulipdir=%(libdir)/%(name)

    %install_dir %(installroot)$zulipdir
    cp -a dist/linux-unpacked/* %(installroot)$zulipdir

    %install_file build/zulip.png -t %(installroot)%(datadir)/icons/hicolor/512x512/apps/

    %install_file %(pkgdir)/Zulip.desktop -t %(installroot)%(datadir)/applications
    %install_exe %(pkgdir)/zulip.sh %(installroot)%(bindir)/zulip
