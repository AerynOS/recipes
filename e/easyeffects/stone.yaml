#
# SPDX-FileCopyrightText: Â© 2020-2025 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : easyeffects
version     : 7.2.5
release     : 5
homepage    : https://github.com/wwmm/easyeffects
upstreams   :
    - https://github.com/wwmm/easyeffects/archive/refs/tags/v7.2.5.tar.gz : d86877b12648a24b3b21a56d16d5680ee2585d575878ecdcea1b9bd9bb428191
summary     : Audio effects for PipeWire applications (WIP Packaging)
description : |
    Limiter, compressor, convolver, equalizer and auto volume and many other plugins for PipeWire applications 
license     : GPL-3.0
builddeps   : 
    - binary(itstool)
    - binary(msgfmt)
    - pkgconfig(fftw3)
    - pkgconfig(fftw3f)
    - pkgconfig(fmt)
    - pkgconfig(gio-2.0)
    - pkgconfig(gsl)
    - pkgconfig(gtk4)
    - pkgconfig(libadwaita-1)
    - pkgconfig(libbs2b)
    - pkgconfig(libebur128)
    - pkgconfig(libpipewire-0.3)
    - pkgconfig(libportal-gtk4)
    - pkgconfig(lilv-0)
    - pkgconfig(nlohmann_json)
    - pkgconfig(rnnoise)
    - pkgconfig(samplerate)
    - pkgconfig(sigc++-3.0)
    - pkgconfig(sndfile)
    - pkgconfig(soundtouch)
    - pkgconfig(speexdsp)
    - pkgconfig(tbb)
    - desktop-file-utils
    - ladspa-devel
    - libcxx-devel-static # For experimental flag below
    - zita-convolver-devel
    # appstream-util
rundeps     :
    - binary(pipewire)
    # Needed to handle autostart files
    # https://github.com/wwmm/easyeffects/blob/2a761c3ba928bb279e05b326632c768446fe6dd4/src/meson.build#L154
    - libportal-gtk4
    - lsp-plugins-lv2
setup       : |
    # https://github.com/llvm/llvm-project/issues/65125
    # error: no member named 'par_unseq' in namespace 'std::execution'
    export CXXFLAGS="${CXXFLAGS} -fexperimental-library"

    %meson \
        -Denable-libcpp-workarounds=true
build       : |
    %meson_build
install     : |
    %meson_install

