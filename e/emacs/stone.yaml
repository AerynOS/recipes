#
# SPDX-FileCopyrightText: © 2025- AerynOS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : emacs
version     : "31.0.50"
release     : 1
homepage    : https://www.gnu.org/software/emacs
upstreams   :
    - git|https://github.com/emacs-mirror/emacs.git : d62370a0ec5bef48fcbe4dd14e8b9e129a0d0cae # d62370a
summary     : An extensible, customizable, free/libre text editor — and more.
description : |
    At its core is an interpreter for Emacs Lisp, a dialect of the Lisp programming language with extensions to support text editing.
license     :
    - GPL-3.0-or-later
builddeps   :
    - binary(ld)
    - binary(makeinfo)
    - binary(tar)
    - pkgconfig(alsa)
    - pkgconfig(cairo)
    - pkgconfig(dbus-1)
    - pkgconfig(fontconfig)
    - pkgconfig(freetype2)
    - pkgconfig(gdk-3.0)
    - pkgconfig(gdk-pixbuf-2.0)
    - pkgconfig(glib-2.0)
    - pkgconfig(gmp)
    - pkgconfig(gnutls)
    - pkgconfig(harfbuzz)
    - pkgconfig(jansson)
    - pkgconfig(lcms2)
    - pkgconfig(libjpeg)
    - pkgconfig(libpng)
    - pkgconfig(librsvg-2.0)
    - pkgconfig(libtiff-4)
    - pkgconfig(tree-sitter)
    - pkgconfig(libwebp)
    - pkgconfig(libxml-2.0)
    - pkgconfig(ncurses)
    - pkgconfig(pango)
    - pkgconfig(smartcols)
    - pkgconfig(sqlite3)
    - pkgconfig(systemd)
    - pkgconfig(xfixes)
    - pkgconfig(xpm)
    - pkgconfig(zlib)
    - giflib-devel
    - gpm-devel
    - libgccjit-devel
toolchain   : gnu
setup       : |
    %autogen_with_bash \
        --sysconfdir=%(vendordir) \
        --infodir=%(datadir)/%(name)/info \
        --with-cairo \
        --with-harfbuzz \
        --with-libsystemd \
        --with-modules \
        --with-pgtk \
        --with-tree-sitter \
        --with-native-compilation=aot \
        --without-x \
        --enable-link-time-optimization
build       : |
    %make bootstrap
install     : |
    %make_install
