#
# SPDX-FileCopyrightText: Â© 2020-2025 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : extra-cmake-modules
version     : 6.17.0
release     : 11
upstreams   :
    - https://download.kde.org/stable/frameworks/6.17/extra-cmake-modules-6.17.0.tar.xz : dfecb17d0238f4de1dd3485b92a6606137d4a9c67b9e4ce40407fe0f2aec0a40
homepage    : https://community.kde.org/Frameworks
license     :
    - BSD-2-Clause
    - BSD-3-Clause
    - MIT
summary     : Extra cmake modules and scripts
description : |
    Extra cmake modules and scripts
builddeps   :
    - binary(doxygen)
    - cmake(Qt6)
    - cmake(Qt6ToolsTools)
    - python(sphinx)
    - python(sphinxcontrib-qthelp)
rundeps     :
    - binary(doxygen)
    - cmake(Qt6) # We default to Qt6
    - cmake(Qt6ToolsTools)
setup       : |
    %patch %(pkgdir)/0001-Enable-stateless-paths.patch
    %patch %(pkgdir)/0002-We-use-qmake-rather-than-qmake-qt5.patch
    %patch %(pkgdir)/0001-Workaround-LLVM-bug-with-hardlinked-includes.patch

    # Construct the KF6 macro manually otherwise we'd pull in ECM, and we are ECM
    %cmake %(options_cmake_kf6)
build       : |
    %cmake_build
install     : |
    %cmake_install
packages    :
    - "%(name)-docs":
        paths:
            - /usr/share/doc
