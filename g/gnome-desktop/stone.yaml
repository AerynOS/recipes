#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : gnome-desktop
version     : "44.3"
release     : 10
homepage    : https://gitlab.gnome.org/GNOME/gnome-desktop
upstreams   :
    - https://download.gnome.org/sources/gnome-desktop/44/gnome-desktop-44.3.tar.xz : 40efa9aa8d50effed9227a3d70671e32e9dc35e20f331cab3b562975978f4f8d
summary     : libgnome-desktop is an unstable backend library for sharing code between GNOME desktop components.
description : |
    gnome-desktop contains the libgnome-desktop library as well as a data file that exports the "GNOME" version to the Settings Details panel. The libgnome-desktop library provides API shared by several applications on the desktop, but that cannot live in the platform for various reasons. There is no API or ABI guarantee, although we are doing our best to provide stability. Documentation for the API is available with gtk-doc.
license     :
    - LGPL-2.1-or-later
builddeps   :
    - binary(itstool)
    - binary(msgfmt)
    - pkgconfig(gobject-introspection-1.0)
    - pkgconfig(gsettings-desktop-schemas)
    - pkgconfig(gtk+-3.0)
    - pkgconfig(gtk4)
    - pkgconfig(libseccomp)
    - pkgconfig(iso-codes)
    - pkgconfig(udev)
    - pkgconfig(xkbfile)
    - pkgconfig(xkeyboard-config)
setup       : |
    %meson \
        -Dbuild_gtk4=true \
        -Ddesktop_docs=false \
        -Dgtk_doc=false \
        -Dlegacy_library=true
build       : |
    %meson_build
install     : |
    %meson_install

    for i in %(name) %(name)-devel; do
        %install_dir %(installroot)%(docdir)/${i}
        echo "DEPRECATED" > %(installroot)%(docdir)/${i}/README
    done
packages    :
    # DEPRECATED
    - "%(name)":
        paths:
            - /usr/share/doc/gnome-desktop/

    - "%(name)-devel":
        paths:
            - /usr/share/doc/gnome-desktop-devel/

    - "lib%(name)-common":
        paths:
            - /usr/share/locale/

    - "lib%(name)-gtk3":
        rundeps:
            - "lib%(name)-common"
            - bubblewrap
        paths:
            - /usr/lib/gnome-desktop/gnome-desktop-debug/
            - /usr/lib/libgnome-desktop-3.so.*
            - /usr/lib/girepository-1.0/GnomeDesktop-3.0.typelib

    - "lib%(name)-gtk3-devel":
        rundeps:
            - "lib%(name)-gtk3"
        paths:
            - /usr/include/gnome-desktop-3.0/
            - /usr/lib/pkgconfig/gnome-desktop-3.0.pc
            - /usr/share/gir-1.0/GnomeDesktop-3.0.gir
            - /usr/lib/libgnome-desktop-3.so

    - "lib%(name)-gtk4":
        rundeps:
            - "lib%(name)-common"
        paths:
            - /usr/lib/girepository-1.0/Gnome*-4.0.typelib
            - /usr/lib/libgnome-*-4.so.*

    - "lib%(name)-gtk4-devel":
        rundeps:
            - "lib%(name)-gtk4"
        paths:
            - /usr/include/gnome-desktop-4.0/
            - /usr/lib/pkgconfig/gnome-*-4.pc
            - /usr/share/gir-1.0/Gnome*-4.0.gir
            - /usr/lib/libgnome-*-4.so
