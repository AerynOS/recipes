#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : gjs
version     : 1.84.2
release     : 10
homepage    : https://gitlab.gnome.org/GNOME/gjs
upstreams   :
    - https://download.gnome.org/sources/gjs/1.84/gjs-1.84.2.tar.xz : 35142edf345705636300291ec3a7d583f14969ff3fae0ff30f4a95b1e6740166
summary     : GNOME Javascript Bindings
description : |
    GNOME JavaScript bindings and `gjs` interpreter
license     :
    - BSD-3-Clause
    - CC0-1.0
    - GPL-2.0-or-later
    - GPL-3.0-or-later
    - LGPL-2.0-or-later
    - LGPL-2.1-or-later
    - MIT
    - MPL-1.1
    - MPL-2.0
builddeps   :
    - binary(dbus-run-session)
    - binary(glib-compile-schemas)
    - pkgconfig(cairo)
    - pkgconfig(cairo-gobject)
    - pkgconfig(cairo-xlib)
    - pkgconfig(gio-2.0)
    - pkgconfig(glib-2.0)
    - pkgconfig(gobject-2.0)
    - pkgconfig(gobject-introspection-1.0)
    - pkgconfig(gthread-2.0)
    - pkgconfig(gtk4)
    - pkgconfig(libffi)
    - pkgconfig(mozjs-128)
    - pkgconfig(readline)
    - pkgconfig(sysprof-capture-4)
    # Dtrace
checkdeps   :
    - pkgconfig(gtk+-3.0)
tuning      :
    - symbolic: false
setup       : |
    %meson -Dinstalled_tests=false
build       : |
    %meson_build
install     : |
    %meson_install
check       : |
    %meson_test || :
packages    :
    - "%(name)-devel":
        paths:
            - /usr/share/gjs-1.0/lsan/
            - /usr/share/gjs-1.0/valgrind/

    - "%(name)-tests":
        summary: Tests for the %(name) package
        description: Tests for the %(name) package
        paths:
            - /usr/lib/gjs/installed-tests/
