#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : nftables
version     : 1.1.4
release     : 8
homepage    : https://www.netfilter.org/projects/nftables/
upstreams   :
    - https://netfilter.org/pub/nftables/nftables-1.1.4.tar.xz : 3444f0012af0472399eeae89a758b9c6dc5f311f6c67a48988fa1600fc4bac86
summary     : Netfilter nf_tables user library
description : |
    Netfilter nf_tables user library
license     :
    - GPL-2.0-only
builddeps   :
    - binary(python3)
    - pkgconfig(gmp)
    - pkgconfig(jansson)
    - pkgconfig(libmnl)
    - pkgconfig(libnftnl)
    - pkgconfig(readline)
    - python(setuptools)
setup       : |
    %configure \
        --disable-static \
        --sysconfdir=%(vendordir)/ \
        --with-json \
        --with-cli=readline
build       : |
    %make

    pushd py
    %pyproject_build
install     : |
    %make_install

    pushd py
    %pyproject_install
tune        :
    - lto: full
    - optimize: speed
packages    :
    - "%(name)-docs":
        paths:
            - /usr/share/doc/*

    - "python-%(name)":
        summary: "Netfilter nf_tables user library - Python library"
        description: |
            Netfilter nf_tables user library - Python Library
        rundeps:
            - "%(name)"
            - python-libs
        paths:
            - /usr/lib/python*
