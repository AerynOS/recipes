#
# SPDX-FileCopyrightText: Â© 2020-2025 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : protobuf
version     : "31.0"
release     : 4
homepage    : https://github.com/protocolbuffers/protobuf
upstreams   :
    - https://github.com/protocolbuffers/protobuf/releases/download/v31.0/protobuf-31.0.tar.gz : 29372fc269325b491126d204931eda436bf9a593f46b3467fac42c40f9b32944
summary     : Protocol Buffers - Google's data interchange format
description : |
    Protocol Buffers - Google's data interchange format
license     : BSD-3-Clause
builddeps   :
    - cmake(absl)
    - pkgconfig(zlib)
packages    :
    - "%(name)-devel":
        paths:
            - /usr/bin/*
setup       : |
    %cmake -Dprotobuf_LOCAL_DEPENDENCIES_ONLY=OFF . \
           -DBUILD_SHARED_LIBS=ON \
           -DCMAKE_SKIP_RPATH=ON \
           -DCMAKE_SKIP_INSTALL_RPATH=ON \
           -Dprotobuf_BUILD_TESTS=OFF \
           -Dprotobuf_ABSL_PROVIDER=package
build       : |
    %cmake_build
install     : |
    %cmake_install

    # No static
    rm -rfv %(installroot)%(libdir)/lib*.a
