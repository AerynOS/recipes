#
# SPDX-FileCopyrightText: Â© 2020-2025 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : python-evdev
version     : 1.9.2
release     : 2
upstreams   :
    - https://github.com/gvalkov/python-evdev/archive/refs/tags/v1.9.2.tar.gz : 1cfb65765b8c63e587110d9b42fa26806bd6dd76565c55c3618afd4c4c48c5a5
homepage    : https://github.com/gvalkov/python-evdev
license     : BSD-3-Clause
summary     : Python bindings for the Linux input subsystem
description : |
    This package provides bindings to the generic input event interface in Linux. The evdev interface serves the purpose of passing events generated in the kernel directly to userspace through character devices that are typically located in /dev/input/. This package also comes with bindings to uinput, the userspace input subsystem. Uinput allows userspace programs to create and handle input devices that can inject events directly into the input subsystem.
builddeps   :
    - pkgconfig(python3)
    - python(setuptools)
checkdeps   :
    - python(pytest)
rundeps     :
    - python-libs
build       : |
    %pyproject_build
install     : |
    %pyproject_install
check       : |
    # TODO replace with pytest macro
    _lib=$(ls $PWD/build/ | grep lib)
    # Uinput tests fail on build server
    PYTHONPATH="$PWD"/build/${_lib} pytest -v -k "not test_uinput"
