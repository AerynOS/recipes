#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : p11-kit
version     : "0.26.2"
release     : 11
homepage    : https://p11-glue.freedesktop.org
upstreams   :
    - https://github.com/p11-glue/p11-kit/releases/download/0.26.2/p11-kit-0.26.2.tar.xz: 09fd9f44da4813a3141e73d5e7cf7008e5660d0405f13d56c15e1da9dcecf828
summary     : Loads and enumerates PKCS#11 modules
description : |
   Loads and enumerates PKCS#11 modules
license     : GPL-2.0-or-later
builddeps   :
    - binary(gettext)
    - pkgconfig(bash-completion)
    - pkgconfig(libffi)
    - pkgconfig(libtasn1)
    - pkgconfig(libsystemd)
    # cmake(GtkDocConfig)
setup       : |
    %meson \
        -Dsystem_config=/usr/share/defaults/pkcs11 \
        -Duser_config=/etc/pkcs11 \
        -Dtrust_paths=/etc/ca-certificates/trust-source:/usr/share/ca-certificates/trust-source
build       : |
    %meson_build
install     : |
    %meson_install

    %tmpfiles "# Create /etc/pkcs11 directory"
    %tmpfiles "d /etc/pkcs11 0755 - - -"
check       : |
    %meson_test
packages    :
    - "%(name)-libs":
        description: |
            p11-kit libraries
        paths:
            - /usr/lib/libp11-kit.so.*
            - /usr/lib/p11-kit-proxy.so
            - /usr/lib/pkcs11/p11-kit-*.so
