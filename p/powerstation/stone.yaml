#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : powerstation
version     : "0.8.1"
release     : 11
homepage    : https://github.com/ShadowBlip/PowerStation
upstreams   :
    - https://github.com/ShadowBlip/PowerStation/archive/refs/tags/v0.8.1.tar.gz : 8cd83d570a6e4d3ae3178a9073329c31526e8cd5e5900e8309a57d1db3c83ab4
summary     : Open source TDP control and performance daemon with DBus interface
description : |
    PowerStation is an open source TDP control and performance daemon for Linux that can be used to control CPU and GPU settings for better performance and battery life.
    Performance control is done through DBus to provide a UI-agnostic interface to CPU and GPU settings.
license     : GPL-3.0-or-later
networking  : true
builddeps   :
    - binary(cmake)
    - binary(make)
    - pkgconfig(libpci)
    - pkgconfig(libudev)
setup       : |
    %cargo_fetch
build       : |
    %cargo_build
install     : |
    %cargo_install
    # preserve use of our own macros so we dont use the generic cargo invocations in the makefile,
    # which basically just copies all of rootfs/ to the installroot
    %install_dir %(installroot)/usr
    cp -R rootfs/usr/* %(installroot)/usr/.
    rm -rf %(installroot)%(datadir)/dbus-1/system-services
