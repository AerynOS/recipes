#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : plymouth
version     : "24.004.60+git.45655f12"
release     : 11
homepage    : https://www.freedesktop.org/wiki/Software/Plymouth/
upstreams   :
    - git|https://gitlab.freedesktop.org/plymouth/plymouth.git : 45655f12fa2d5553ab4ba509f2e203c249191664
summary     : Graphical Boot Animation and Logger
description : |
    Graphical Boot Animation and Logger
license     : GPL-3.0
builddeps   :
    - binary(msgfmt)
    - binary(systemd-tty-ask-password-agent)
    - binary(xsltproc)
    - pkgconfig(cairo)
    - pkgconfig(dbus-1)
    - pkgconfig(freetype2)
    - pkgconfig(gtk+-3.0)
    - pkgconfig(libdrm)
    - pkgconfig(libevdev)
    - pkgconfig(libpng)
    - pkgconfig(libudev)
    - pkgconfig(ncurses)
    - pkgconfig(pango)
    - pkgconfig(pangocairo)
    - pkgconfig(systemd)
    - pkgconfig(xkbcommon)
    - pkgconfig(xkeyboard-config)
    - docbook
    - docbook-xsl
    - os-artwork
rundeps    :
    - font-cantarell
    - os-artwork
environment : |
    %export_docbook_catalogs
setup       : |
    %patch %(pkgdir)/0001-Set-plymouth-defaults.patch
    %patch %(pkgdir)/0001-Fix-build-with-uutils-date.patch

    %meson \
        --libexecdir=lib \
        -Dlogo=/usr/share/icons/aerynos-logo-dark.png
build       : |
    %meson_build
install     : |
    %meson_install
    %install_file /usr/share/icons/aerynos-logo-dark.png %(installroot)%(datadir)/plymouth/themes/spinner/watermark.png
    %install_file %(pkgdir)/10-splash.cmdline %(installroot)%(libdir)/kernel/cmdline.d/10-splash.cmdline
