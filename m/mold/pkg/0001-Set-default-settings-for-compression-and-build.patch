From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Reilly Brogan <reilly@reillybrogan.com>
Date: Thu, 12 Dec 2024 19:13:16 -0600
Subject: [PATCH] Set default settings for compression and build-id

Set the default to compress debug sections with zstd, and also set the default to create a build-id using BLAKE3 that's 160 bits long.
---
 src/mold.h | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/mold.h b/src/mold.h
index 382a6f78..59dc84a7 100644
--- a/src/mold.h
+++ b/src/mold.h
@@ -2075,9 +2075,9 @@ struct BuildId {
     }
   }
 
-  enum { NONE, HEX, HASH, UUID } kind = NONE;
+  enum { NONE, HEX, HASH, UUID } kind = HASH;
   std::vector<u8> value;
-  i64 hash_size = 0;
+  i64 hash_size = 20;
 };
 
 typedef enum {
@@ -2282,7 +2282,7 @@ struct Context {
     bool z_shstk = false;
     bool z_start_stop_visibility_protected = false;
     bool z_text = false;
-    i64 compress_debug_sections = ELFCOMPRESS_NONE;
+    i64 compress_debug_sections = ELFCOMPRESS_ZSTD;
     i64 filler = -1;
     i64 spare_dynamic_tags = 5;
     i64 spare_program_headers = 0;
