#
# SPDX-FileCopyrightText: Â© 2020-2025 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : kdsoap
version     : 2.2.0
release     : 1
upstreams   :
    - https://github.com/KDAB/KDSoap/releases/download/kdsoap-2.2.0/kdsoap-2.2.0.tar.gz : d9ef11948442197c9fa44bd6fbadc842b7280a60dfc40577af66fded637af356
homepage    : https://www.kdab.com/development-resources/qt-tools/kd-soap
license     :
    - GPL-3.0-only
    - AGPL-3.0-only
summary     : Qt-based client-side and server-side SOAP component
description : |
    Qt-based client-side and server-side SOAP component
builddeps   :
    - binary(patchelf)
    - cmake(Qt6Core)
setup       : |
    %cmake \
        -DKDSoap_QT6=ON
build       : |
    %cmake_build
install     : |
    %cmake_install

    # Kill rpath
    patchelf --remove-rpath %(installroot)/%(bindir)/kdwsdl2cpp-qt6
packages    :
    - "%(name)-qt6":
        paths:
            - /usr/lib/libkdsoap*-qt6.so.*
            - /usr/share/doc/KDSoap-qt6/

    - "%(name)-qt6-devel":
        rundeps:
            - "%(name)-qt6"
        paths:
            - /usr/bin/kdwsdl2cpp-qt6
            - /usr/include/KDSoapClient-Qt6/
            - /usr/include/KDSoapServer-Qt6/
            - /usr/lib/cmake/KDSoap-qt6/
            - /usr/lib/libkdsoap*-qt6.so
            - /usr/lib/qt6/mkspecs/
