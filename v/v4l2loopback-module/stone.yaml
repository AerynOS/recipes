name        : v4l2loopback-module
version     : 0.15.3
release     : 1
homepage    : https://github.com/umlaeute/v4l2loopback
upstreams   :
    - https://github.com/umlaeute/v4l2loopback/archive/refs/tags/v0.15.3.tar.gz : 2758ea287da8dd34a0421c0dd50094a0342d22414e1bbccbbe92f41bbaa26b2d
summary     : V4L2 loopback device (virtual camera)
description : |
    This module allows you to create virtual video devices. Normal (v4l2) applications
    will read these devices as if they were ordinary video devices, but the video
    is generated by another application. Perfect for OBS Virtual Camera.
license     :
    - GPL-2.0-only
builddeps   :
    - linux-desktop-devel
environment : |
   _KPATH=$(find %(libdir)/modules -maxdepth 2 -name build | sort -V | tail -n 1); export "${_KPATH}"
   _KVER=$(basename $(dirname ${_KPATH})); export "${_KVER}"
build       : |
    %make LLVM=1 KDIR=${_KPATH} KERNELRELEASE=${_KVER}
install     : |
    %install_dir %(installroot)%(libdir)/modules/${_KVER}/extra/
    %install_file v4l2loopback.ko -t %(installroot)%(libdir)/modules/${_KVER}/extra/
