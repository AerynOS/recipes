#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : vulkan-loader
version     : 1.4.321.0
release     : 14
homepage    : https://vulkan.lunarg.com/doc/sdk
upstreams   :
    - https://github.com/KhronosGroup/Vulkan-Loader/archive/refs/tags/vulkan-sdk-1.4.321.0.tar.gz : 9e0315bd13d8def7d130524d0b69d0bef3e967374327ac69dd9c54cd2b716e8f
summary     : Vulkan ICD desktop loader
description : |
    This project provides the Khronos official Vulkan ICD desktop loader.
license     :
    - Apache-2.0
builddeps   :
    - binary(git)
    - cmake(VulkanHeaders)
    - pkgconfig32(wayland-client)
    - pkgconfig32(x11)
    - pkgconfig32(xrandr)
emul32     : true
profiles   :
    - emul32:
        environment: |
            # This is required so that the assembler test in cmake succeeds
            export ASFLAGS=" --32"
            export CFLAGS+=" -m32"
            export CXXFLAGS+=" -m32"
setup       : |
    %cmake -DCMAKE_INSTALL_LIBDIR=lib%(libsuffix)
build       : |
    %cmake_build
install     : |
    %cmake_install
packages    :
    - "%(name)-devel":
        rundeps:
            # Not _strictly_ required, but the cmake FindVulkan.cmake module won't consider vulkan found without it
            - cmake(VulkanHeaders)
