#
# SPDX-FileCopyrightText: Â© 2020-2025 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : vlc
version     : 3.0.21+git.49307128
release     : 6
upstreams   :
    # Use the latest from the 3.0.x series branch which has fixed VAAPI support for FFMPEG 7.x
    - git|https://code.videolan.org/videolan/vlc.git : 49307128534c4bb3a554734ac40e32bd2d04a80d
    # - https://download.videolan.org/pub/videolan/vlc/3.0.21/vlc-3.0.21.tar.xz : 24dbbe1d7dfaeea0994d5def0bbde200177347136dbfe573f5b6a4cee25afbb0
homepage    : https://www.videolan.org/
license     :
    - GPL-2.0-or-later
    - LGPL-2.1-or-later
summary     : Open source multimedia player
description : |
    Open source multimedia player
builddeps   :
    - binary(bison)
    - binary(flex)
    - binary(tar)
    - binary(valgrind)
    - pkgconfig(Qt5Gui)
    - pkgconfig(Qt5Svg)
    - pkgconfig(Qt5Widgets)
    - pkgconfig(Qt5X11Extras)
    - pkgconfig(alsa)
    - pkgconfig(aom)
    - pkgconfig(avahi-client)
    - pkgconfig(dav1d)
    - pkgconfig(dbus-1)
    - pkgconfig(dvdnav)
    - pkgconfig(dvdread)
    - pkgconfig(flac)
    # - pkgconfig(freerdp3)
    - pkgconfig(freetype2)
    - pkgconfig(gnutls)
    - pkgconfig(gstreamer-app-1.0)
    - pkgconfig(gstreamer-video-1.0)
    - pkgconfig(gtk+-3.0)
    - pkgconfig(ice)
    - pkgconfig(libarchive)
    - pkgconfig(libass)
    - pkgconfig(libavcodec)
    - pkgconfig(libavformat)
    - pkgconfig(libavutil)
    - pkgconfig(libgcrypt)
    - pkgconfig(libidn2)
    - pkgconfig(libjpeg)
    - pkgconfig(libmtp)
    - pkgconfig(libnotify)
    # Doesn't support libplacebo > 6
    # - pkgconfig(libplacebo)
    - pkgconfig(libpng)
    - pkgconfig(libpostproc)
    - pkgconfig(libpulse)
    - pkgconfig(librsvg-2.0)
    - pkgconfig(libsecret-1)
    - pkgconfig(libssh2)
    - pkgconfig(libswscale)
    - pkgconfig(libsystemd)
    - pkgconfig(libva)
    - pkgconfig(libva-drm)
    - pkgconfig(libva-wayland)
    - pkgconfig(lua)
    - pkgconfig(minizip)
    - pkgconfig(ncursesw)
    - pkgconfig(ogg)
    # Not compatible with opencv 4.x
    # https://code.videolan.org/videolan/vlc/-/issues/22016
    # - pkgconfig(opencv4) 
    - pkgconfig(opus)
    - pkgconfig(protobuf-lite)
    - pkgconfig(samplerate)
    - pkgconfig(sm)
    - pkgconfig(smbclient)
    - pkgconfig(taglib)
    - pkgconfig(theoradec)
    - pkgconfig(vdpau)
    - pkgconfig(vorbis)
    - pkgconfig(vpl)
    - pkgconfig(vpx)
    - pkgconfig(x264)
    - pkgconfig(x265)
    - pkgconfig(xcb-keysyms)
    - pkgconfig(xpm)
    - pkgconfig(zlib)

    # TODO (This list may include things we don't actually want):
    # live555
    # libdc1394-2
    # libraw1394
    # zvbi-0.2
    # libbluray
    # libdsm
    # libnfs
    # libcddb
    # libvncclient
    # asdcplib
    # libdvbpsi
    # libgme
    # libsidplay2
    # shout
    # libmatroska
    # libebml
    # libmodplug
    # shine
    # libmpg123
    # twolame
    # speex
    # spatialaudio
    # schroedinger-1.0
    # fluidsynth
    # fluidlite
    # aribb24 (aribb25 ?)
    # libkate (note, not the same as kate the text editor)
    # tiger
    # SDL_image (only supports SDL1?)
    # caca
    # mmal ?
    # jack
    # soxr
    # libchromaprint
    # srt
    # libgoom2
    # libprojectM
    # libvsxu
    # libupnp
    # microdns
    # liba52
setup       : |
    export BUILDCC="$CC"
    %patch %(pkgdir)/libidn2.patch
    %patch %(pkgdir)/oneVPL.patch

    %reconfigure \
        --disable-a52 \
        --disable-optimizations \
        --disable-skins2 \
        --disable-static \
        --disable-telx \
        --with-default-font-family=NotoSerif \
        --with-default-monospace-font-family=NotoSansMono \
        --with-kde-solid=%(datadir)/solid/actions
build       : |
    %make \
        LIBTOOL=rclibtool
install     : |
    %make_install \
        LIBTOOL=rclibtool

    %install_file %(pkgdir)/trigger.yaml %(installroot)/usr/share/moss/triggers/sys.d/vlc_cache_gen.yaml
    
    # Generated by trigger
    rm -v %(installroot)%(libdir)/vlc/plugins/plugins.dat

    # No static!
    rm -v %(installroot)%(libdir)/vlc/libcompat.a

    # GNOME 2.x script, not compatible with GNOME 3+
    rm -v %(installroot)%(datadir)/vlc/utils/gnome-vlc-default.sh

    # Unused
    rm -rfv %(installroot)%(datadir)/doc

    %install_dir %(installroot)%(docdir)/%(name)-plugins-all
    echo "This file will disappear when virtual packages are introduced" > %(installroot)%(docdir)/%(name)-plugins-all/VIRTUAL
packages    :
    - "%(name)-libs":
        summary: VLC media player runtime libraries
        description: VLC media player runtime libraries
        paths:
            - /usr/lib/libvlc.so.*
            - /usr/lib/libvlccore.so.*
            - /usr/lib/vlc/vlc-cache-gen
            - /usr/share/moss/triggers/sys.d/vlc_cache_gen.yaml

    - "%(name)-cli":
        summary: VLC media player command line interface
        description: VLC media player command line interface
        rundeps:
            - "%(name)-plugins-base"
        paths:
            - /usr/bin/vlc
            - /usr/bin/cvlc
            - /usr/bin/rvlc
            - /usr/bin/vlc-wrapper
            - /usr/share/man/man1/vlc*

    - "%(name)-ncurses":
        summary: VLC media player TUI
        description: VLC media player TUI
        rundeps:
            - "%(name)-plugins-base"
        paths:
            - /usr/bin/nvlc
            - /usr/lib/vlc/plugins/gui/libncurses_plugin.so

    - "%(name)-qt":
        summary: VLC media player Qt GUI
        description: VLC media player Qt GUI
        rundeps:
            - "%(name)-cli"
            - "%(name)-plugins-base"
            - "%(name)-plugins-video-out"
            - "%(name)-plugin-lua"
            - "%(name)-plugin-pulseaudio"
            - qt5-wayland
        paths:
            - /usr/bin/qvlc
            - /usr/lib/vlc/plugins/gui/libqt_plugin.so

    - "%(name)-plugins-base":
        summary: VLC media player core
        description: VLC media player core
        rundeps:
            - font-noto
        paths:
            - /usr/lib/vlc/plugins/access/libaccess_alsa_plugin.so
            - /usr/lib/vlc/plugins/access/libaccess_concat_plugin.so
            - /usr/lib/vlc/plugins/access/libaccess_imem_plugin.so
            - /usr/lib/vlc/plugins/access/libaccess_mms_plugin.so
            - /usr/lib/vlc/plugins/access/libaccess_realrtsp_plugin.so
            - /usr/lib/vlc/plugins/access/libattachment_plugin.so
            - /usr/lib/vlc/plugins/access/libdtv_plugin.so
            - /usr/lib/vlc/plugins/access/libfilesystem_plugin.so
            - /usr/lib/vlc/plugins/access/libftp_plugin.so
            - /usr/lib/vlc/plugins/access/libhttp_plugin.so
            - /usr/lib/vlc/plugins/access/libhttps_plugin.so
            - /usr/lib/vlc/plugins/access/libidummy_plugin.so
            - /usr/lib/vlc/plugins/access/libimem_plugin.so
            - /usr/lib/vlc/plugins/access/librist_plugin.so
            - /usr/lib/vlc/plugins/access/librtp_plugin.so
            - /usr/lib/vlc/plugins/access/libsatip_plugin.so
            - /usr/lib/vlc/plugins/access/libsdp_plugin.so
            - /usr/lib/vlc/plugins/access/libshm_plugin.so
            - /usr/lib/vlc/plugins/access/libtcp_plugin.so
            - /usr/lib/vlc/plugins/access/libtimecode_plugin.so
            - /usr/lib/vlc/plugins/access/libudp_plugin.so
            - /usr/lib/vlc/plugins/access/libvcd_plugin.so
            - /usr/lib/vlc/plugins/access/libvdr_plugin.so
            - /usr/lib/vlc/plugins/access_output/libaccess_output_dummy_plugin.so
            - /usr/lib/vlc/plugins/access_output/libaccess_output_file_plugin.so
            - /usr/lib/vlc/plugins/access_output/libaccess_output_http_plugin.so
            - /usr/lib/vlc/plugins/access_output/libaccess_output_livehttp_plugin.so
            - /usr/lib/vlc/plugins/access_output/libaccess_output_rist_plugin.so
            - /usr/lib/vlc/plugins/access_output/libaccess_output_shout_plugin.so
            - /usr/lib/vlc/plugins/access_output/libaccess_output_udp_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libaudio_format_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libaudiobargraph_a_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libchorus_flanger_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libcompressor_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libdolby_surround_decoder_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libequalizer_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libgain_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libheadphone_channel_mixer_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libkaraoke_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libmono_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libnormvol_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libparam_eq_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libremap_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libscaletempo_pitch_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libscaletempo_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libsimple_channel_mixer_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libspatializer_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libstereo_widen_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libtospdif_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libtrivial_channel_mixer_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libugly_resampler_plugin.so
            - /usr/lib/vlc/plugins/audio_mixer/libfloat_mixer_plugin.so
            - /usr/lib/vlc/plugins/audio_mixer/libinteger_mixer_plugin.so
            - /usr/lib/vlc/plugins/audio_output/libadummy_plugin.so
            - /usr/lib/vlc/plugins/audio_output/libafile_plugin.so
            - /usr/lib/vlc/plugins/audio_output/libalsa_plugin.so
            - /usr/lib/vlc/plugins/audio_output/libamem_plugin.so
            - /usr/lib/vlc/plugins/codec/liba52_plugin.so
            - /usr/lib/vlc/plugins/codec/libadpcm_plugin.so
            - /usr/lib/vlc/plugins/codec/libaes3_plugin.so
            - /usr/lib/vlc/plugins/codec/libaraw_plugin.so
            - /usr/lib/vlc/plugins/codec/libcc_plugin.so
            - /usr/lib/vlc/plugins/codec/libcdg_plugin.so
            - /usr/lib/vlc/plugins/codec/libcvdsub_plugin.so
            - /usr/lib/vlc/plugins/codec/libdav1d_plugin.so
            - /usr/lib/vlc/plugins/codec/libddummy_plugin.so
            - /usr/lib/vlc/plugins/codec/libdvbsub_plugin.so
            - /usr/lib/vlc/plugins/codec/libedummy_plugin.so
            - /usr/lib/vlc/plugins/codec/libfaad_plugin.so
            - /usr/lib/vlc/plugins/codec/libfdkaac_plugin.so
            - /usr/lib/vlc/plugins/codec/libflac_plugin.so
            - /usr/lib/vlc/plugins/codec/libg711_plugin.so
            - /usr/lib/vlc/plugins/codec/libjpeg_plugin.so
            - /usr/lib/vlc/plugins/codec/liblpcm_plugin.so
            - /usr/lib/vlc/plugins/codec/libmpg123_plugin.so
            - /usr/lib/vlc/plugins/codec/liboggspots_plugin.so
            - /usr/lib/vlc/plugins/codec/libopus_plugin.so
            - /usr/lib/vlc/plugins/codec/libpng_plugin.so
            - /usr/lib/vlc/plugins/codec/librawvideo_plugin.so
            - /usr/lib/vlc/plugins/codec/librtpvideo_plugin.so
            - /usr/lib/vlc/plugins/codec/libscte18_plugin.so
            - /usr/lib/vlc/plugins/codec/libscte27_plugin.so
            - /usr/lib/vlc/plugins/codec/libspdif_plugin.so
            - /usr/lib/vlc/plugins/codec/libspeex_plugin.so
            - /usr/lib/vlc/plugins/codec/libspudec_plugin.so
            - /usr/lib/vlc/plugins/codec/libstl_plugin.so
            - /usr/lib/vlc/plugins/codec/libsubsdec_plugin.so
            - /usr/lib/vlc/plugins/codec/libsubstx3g_plugin.so
            - /usr/lib/vlc/plugins/codec/libsubsusf_plugin.so
            - /usr/lib/vlc/plugins/codec/libsvcdsub_plugin.so
            - /usr/lib/vlc/plugins/codec/libt140_plugin.so
            - /usr/lib/vlc/plugins/codec/libtextst_plugin.so
            - /usr/lib/vlc/plugins/codec/libtheora_plugin.so
            - /usr/lib/vlc/plugins/codec/libttml_plugin.so
            - /usr/lib/vlc/plugins/codec/libtwolame_plugin.so
            - /usr/lib/vlc/plugins/codec/libuleaddvaudio_plugin.so
            - /usr/lib/vlc/plugins/codec/libvorbis_plugin.so
            - /usr/lib/vlc/plugins/codec/libvpx_plugin.so
            - /usr/lib/vlc/plugins/codec/libwebvtt_plugin.so
            - /usr/lib/vlc/plugins/codec/libx26410b_plugin.so
            - /usr/lib/vlc/plugins/codec/libx264_plugin.so
            - /usr/lib/vlc/plugins/codec/libx265_plugin.so
            - /usr/lib/vlc/plugins/codec/libxwd_plugin.so
            - /usr/lib/vlc/plugins/control/libdbus_plugin.so
            - /usr/lib/vlc/plugins/control/libdummy_plugin.so
            - /usr/lib/vlc/plugins/control/libgestures_plugin.so
            - /usr/lib/vlc/plugins/control/libhotkeys_plugin.so
            - /usr/lib/vlc/plugins/control/libmotion_plugin.so
            - /usr/lib/vlc/plugins/control/libnetsync_plugin.so
            - /usr/lib/vlc/plugins/control/liboldrc_plugin.so
            - /usr/lib/vlc/plugins/demux/libadaptive_plugin.so
            - /usr/lib/vlc/plugins/demux/libaiff_plugin.so
            - /usr/lib/vlc/plugins/demux/libasf_plugin.so
            - /usr/lib/vlc/plugins/demux/libau_plugin.so
            - /usr/lib/vlc/plugins/demux/libavi_plugin.so
            - /usr/lib/vlc/plugins/demux/libcaf_plugin.so
            - /usr/lib/vlc/plugins/demux/libdemux_cdg_plugin.so
            - /usr/lib/vlc/plugins/demux/libdemux_chromecast_plugin.so
            - /usr/lib/vlc/plugins/demux/libdemux_stl_plugin.so
            - /usr/lib/vlc/plugins/demux/libdemuxdump_plugin.so
            - /usr/lib/vlc/plugins/demux/libdiracsys_plugin.so
            - /usr/lib/vlc/plugins/demux/libdirectory_demux_plugin.so
            - /usr/lib/vlc/plugins/demux/libes_plugin.so
            - /usr/lib/vlc/plugins/demux/libflacsys_plugin.so
            - /usr/lib/vlc/plugins/demux/libh26x_plugin.so
            - /usr/lib/vlc/plugins/demux/libimage_plugin.so
            - /usr/lib/vlc/plugins/demux/libmjpeg_plugin.so
            - /usr/lib/vlc/plugins/demux/libmp4_plugin.so
            - /usr/lib/vlc/plugins/demux/libmpgv_plugin.so
            - /usr/lib/vlc/plugins/demux/libnoseek_plugin.so
            - /usr/lib/vlc/plugins/demux/libnsc_plugin.so
            - /usr/lib/vlc/plugins/demux/libnsv_plugin.so
            - /usr/lib/vlc/plugins/demux/libnuv_plugin.so
            - /usr/lib/vlc/plugins/demux/libogg_plugin.so
            - /usr/lib/vlc/plugins/demux/libplaylist_plugin.so
            - /usr/lib/vlc/plugins/demux/libps_plugin.so
            - /usr/lib/vlc/plugins/demux/libpva_plugin.so
            - /usr/lib/vlc/plugins/demux/librawaud_plugin.so
            - /usr/lib/vlc/plugins/demux/librawdv_plugin.so
            - /usr/lib/vlc/plugins/demux/librawvid_plugin.so
            - /usr/lib/vlc/plugins/demux/libreal_plugin.so
            - /usr/lib/vlc/plugins/demux/libsmf_plugin.so
            - /usr/lib/vlc/plugins/demux/libsubtitle_plugin.so
            - /usr/lib/vlc/plugins/demux/libtta_plugin.so
            - /usr/lib/vlc/plugins/demux/libty_plugin.so
            - /usr/lib/vlc/plugins/demux/libvc1_plugin.so
            - /usr/lib/vlc/plugins/demux/libvobsub_plugin.so
            - /usr/lib/vlc/plugins/demux/libvoc_plugin.so
            - /usr/lib/vlc/plugins/demux/libwav_plugin.so
            - /usr/lib/vlc/plugins/demux/libxa_plugin.so
            - /usr/lib/vlc/plugins/keystore/libfile_keystore_plugin.so
            - /usr/lib/vlc/plugins/keystore/libmemory_keystore_plugin.so
            - /usr/lib/vlc/plugins/logger/libconsole_logger_plugin.so
            - /usr/lib/vlc/plugins/logger/libfile_logger_plugin.so
            - /usr/lib/vlc/plugins/logger/libsd_journal_plugin.so
            - /usr/lib/vlc/plugins/logger/libsyslog_plugin.so
            - /usr/lib/vlc/plugins/meta_engine/libfolder_plugin.so
            - /usr/lib/vlc/plugins/meta_engine/libtaglib_plugin.so
            - /usr/lib/vlc/plugins/misc/libaddonsfsstorage_plugin.so
            - /usr/lib/vlc/plugins/misc/libaddonsvorepository_plugin.so
            - /usr/lib/vlc/plugins/misc/libaudioscrobbler_plugin.so
            - /usr/lib/vlc/plugins/misc/libdbus_screensaver_plugin.so
            - /usr/lib/vlc/plugins/misc/libexport_plugin.so
            - /usr/lib/vlc/plugins/misc/libfingerprinter_plugin.so
            - /usr/lib/vlc/plugins/misc/libgnutls_plugin.so
            - /usr/lib/vlc/plugins/misc/liblogger_plugin.so
            - /usr/lib/vlc/plugins/misc/libstats_plugin.so
            - /usr/lib/vlc/plugins/misc/libvod_rtsp_plugin.so
            - /usr/lib/vlc/plugins/misc/libxdg_screensaver_plugin.so
            - /usr/lib/vlc/plugins/misc/libxml_plugin.so
            - /usr/lib/vlc/plugins/mux/libmux_asf_plugin.so
            - /usr/lib/vlc/plugins/mux/libmux_avi_plugin.so
            - /usr/lib/vlc/plugins/mux/libmux_dummy_plugin.so
            - /usr/lib/vlc/plugins/mux/libmux_mp4_plugin.so
            - /usr/lib/vlc/plugins/mux/libmux_mpjpeg_plugin.so
            - /usr/lib/vlc/plugins/mux/libmux_ogg_plugin.so
            - /usr/lib/vlc/plugins/mux/libmux_ps_plugin.so
            - /usr/lib/vlc/plugins/mux/libmux_wav_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_a52_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_av1_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_copy_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_dirac_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_dts_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_flac_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_h264_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_hevc_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_mlp_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_mpeg4audio_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_mpeg4video_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_mpegaudio_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_mpegvideo_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_vc1_plugin.so
            - /usr/lib/vlc/plugins/services_discovery/libmediadirs_plugin.so
            - /usr/lib/vlc/plugins/services_discovery/libpodcast_plugin.so
            - /usr/lib/vlc/plugins/services_discovery/libsap_plugin.so
            - /usr/lib/vlc/plugins/spu/libaudiobargraph_v_plugin.so
            - /usr/lib/vlc/plugins/spu/libdynamicoverlay_plugin.so
            - /usr/lib/vlc/plugins/spu/liblogo_plugin.so
            - /usr/lib/vlc/plugins/spu/libmarq_plugin.so
            - /usr/lib/vlc/plugins/spu/libmosaic_plugin.so
            - /usr/lib/vlc/plugins/spu/libremoteosd_plugin.so
            - /usr/lib/vlc/plugins/spu/librss_plugin.so
            - /usr/lib/vlc/plugins/spu/libsubsdelay_plugin.so
            - /usr/lib/vlc/plugins/stream_filter/libadf_plugin.so
            - /usr/lib/vlc/plugins/stream_filter/libcache_block_plugin.so
            - /usr/lib/vlc/plugins/stream_filter/libcache_read_plugin.so
            - /usr/lib/vlc/plugins/stream_filter/libdecomp_plugin.so
            - /usr/lib/vlc/plugins/stream_filter/libhds_plugin.so
            - /usr/lib/vlc/plugins/stream_filter/libinflate_plugin.so
            - /usr/lib/vlc/plugins/stream_filter/libprefetch_plugin.so
            - /usr/lib/vlc/plugins/stream_filter/librecord_plugin.so
            - /usr/lib/vlc/plugins/stream_filter/libskiptags_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_autodel_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_bridge_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_cycle_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_delay_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_description_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_display_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_dummy_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_duplicate_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_es_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_gather_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_mosaic_bridge_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_record_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_rtp_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_setid_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_smem_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_standard_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_stats_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_transcode_plugin.so
            - /usr/lib/vlc/plugins/text_renderer/libtdummy_plugin.so
            - /usr/lib/vlc/plugins/video_chroma/*.so
            - /usr/lib/vlc/plugins/video_filter/*.so
            - /usr/lib/vlc/plugins/video_output/libfb_plugin.so
            - /usr/lib/vlc/plugins/video_output/libvdummy_plugin.so
            - /usr/lib/vlc/plugins/video_output/libvmem_plugin.so
            - /usr/lib/vlc/plugins/video_output/libyuv_plugin.so

    - "%(name)-plugins-extra":
        summary: VLC media player extra plugins
        description: VLC media player extra plugins
        rundeps:
            - "%(name)-plugins-base"
        paths:
            - /usr/lib/vlc/plugins/access/libaccess_mtp_plugin.so
            - /usr/lib/vlc/plugins/access/libaccess_srt_plugin.so
            - /usr/lib/vlc/plugins/access/libcdda_plugin.so
            - /usr/lib/vlc/plugins/access/libdcp_plugin.so
            - /usr/lib/vlc/plugins/access/libdvb_plugin.so
            - /usr/lib/vlc/plugins/access/libdvdnav_plugin.so
            - /usr/lib/vlc/plugins/access/libdvdread_plugin.so
            - /usr/lib/vlc/plugins/access/liblibbluray_plugin.so
            - /usr/lib/vlc/plugins/access/liblive555_plugin.so
            - /usr/lib/vlc/plugins/access/libnfs_plugin.so
            - /usr/lib/vlc/plugins/access/libsftp_plugin.so
            - /usr/lib/vlc/plugins/access/liblinsys_hdsdi_plugin.so
            - /usr/lib/vlc/plugins/access/liblinsys_sdi_plugin.so
            - /usr/lib/vlc/plugins/access/libv4l2_plugin.so
            - /usr/lib/vlc/plugins/access/libxcb_screen_plugin.so
            - /usr/lib/vlc/plugins/access_output/libaccess_output_srt_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libmad_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libsamplerate_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libsoxr_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libspatialaudio_plugin.so
            - /usr/lib/vlc/plugins/audio_filter/libspeex_resampler_plugin.so
            - /usr/lib/vlc/plugins/codec/libaom_plugin.so
            - /usr/lib/vlc/plugins/codec/libaribsub_plugin.so
            - /usr/lib/vlc/plugins/codec/libdaala_plugin.so
            - /usr/lib/vlc/plugins/codec/libdca_plugin.so
            - /usr/lib/vlc/plugins/codec/libkate_plugin.so
            - /usr/lib/vlc/plugins/codec/liblibass_plugin.so
            - /usr/lib/vlc/plugins/codec/liblibmpeg2_plugin.so
            - /usr/lib/vlc/plugins/codec/libqsv_plugin.so
            - /usr/lib/vlc/plugins/codec/libschroedinger_plugin.so
            - /usr/lib/vlc/plugins/codec/libsdl_image_plugin.so
            - /usr/lib/vlc/plugins/codec/libzvbi_plugin.so
            - /usr/lib/vlc/plugins/control/liblirc_plugin.so
            - /usr/lib/vlc/plugins/demux/libgme_plugin.so
            - /usr/lib/vlc/plugins/demux/libmpc_plugin.so
            - /usr/lib/vlc/plugins/demux/libmkv_plugin.so
            - /usr/lib/vlc/plugins/demux/libmod_plugin.so
            - /usr/lib/vlc/plugins/demux/libts_plugin.so
            - /usr/lib/vlc/plugins/mux/libmux_ts_plugin.so
            - /usr/lib/vlc/plugins/services_discovery/libavahi_plugin.so
            - /usr/lib/vlc/plugins/services_discovery/libmicrodns_plugin.so
            - /usr/lib/vlc/plugins/services_discovery/libmtp_plugin.so
            - /usr/lib/vlc/plugins/services_discovery/libupnp_plugin.so
            - /usr/lib/vlc/plugins/services_discovery/libudev_plugin.so
            - /usr/lib/vlc/plugins/stream_extractor/libarchive_plugin.so
            - /usr/lib/vlc/plugins/stream_filter/libaribcam_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_chromecast_plugin.so
            - /usr/lib/vlc/plugins/text_renderer/libfreetype_plugin.so
            - /usr/lib/vlc/plugins/video_output/libaa_plugin.so
            - /usr/lib/vlc/plugins/video_output/libcaca_plugin.so

    - "%(name)-plugins-video-out":
        summary: VLC media player vout plugins
        description: VLC media player vout plugins
        rundeps:
            - "%(name)-plugins-base"
        paths:
            - /usr/lib/vlc/libvlc_vdpau.so*
            - /usr/lib/vlc/libvlc_xcb_events.so*
            - /usr/lib/vlc/plugins/control/libxcb_hotkeys_plugin.so
            - /usr/lib/vlc/plugins/services_discovery/libxcb_apps_plugin.so
            - /usr/lib/vlc/plugins/vaapi/*.so
            - /usr/lib/vlc/plugins/vdpau/*.so
            - /usr/lib/vlc/plugins/video_output/libegl_wl_plugin.so
            - /usr/lib/vlc/plugins/video_output/libegl_x11_plugin.so
            - /usr/lib/vlc/plugins/video_output/libflaschen_plugin.so
            - /usr/lib/vlc/plugins/video_output/libgl_plugin.so
            - /usr/lib/vlc/plugins/video_output/libglconv_vaapi_drm_plugin.so
            - /usr/lib/vlc/plugins/video_output/libglconv_vaapi_wl_plugin.so
            - /usr/lib/vlc/plugins/video_output/libglconv_vaapi_x11_plugin.so
            - /usr/lib/vlc/plugins/video_output/libglconv_vdpau_plugin.so
            - /usr/lib/vlc/plugins/video_output/libgles2_plugin.so
            - /usr/lib/vlc/plugins/video_output/libglx_plugin.so
            - /usr/lib/vlc/plugins/video_output/libwl_shell_plugin.so
            - /usr/lib/vlc/plugins/video_output/libwl_shm_plugin.so
            - /usr/lib/vlc/plugins/video_output/libxcb_window_plugin.so
            - /usr/lib/vlc/plugins/video_output/libxcb_x11_plugin.so
            - /usr/lib/vlc/plugins/video_output/libxcb_xv_plugin.so
            - /usr/lib/vlc/plugins/video_output/libxdg_shell_plugin.so
            - /usr/lib/vlc/plugins/video_splitter/*.so

    - "%(name)-plugin-ffmpeg":
        summary: VLC media player FFmpeg plugins
        description: VLC media player FFmpeg plugins
        rundeps:
            - "%(name)-plugins-base"
            - "%(name)-plugins-video-out"
        paths:
            - /usr/lib/vlc/plugins/access/libavio_plugin.so
            - /usr/lib/vlc/plugins/codec/libavcodec_plugin.so
            - /usr/lib/vlc/plugins/codec/libvaapi_drm_plugin.so
            - /usr/lib/vlc/plugins/codec/libvaapi_plugin.so
            - /usr/lib/vlc/plugins/demux/libavformat_plugin.so
            - /usr/lib/vlc/plugins/packetizer/libpacketizer_avparser_plugin.so
            - /usr/lib/vlc/plugins/stream_out/libstream_out_chromaprint_plugin.so
            - /usr/lib/vlc/plugins/vdpau/libvdpau_avcodec_plugin.so
            - /usr/lib/vlc/plugins/video_chroma/libswscale_plugin.so
            - /usr/lib/vlc/plugins/video_filter/libpostproc_plugin.so

    - "%(name)-plugin-gnome":
        summary: VLC media player Gnome Keyring plugin
        description: VLC media player Gnome Keyring plugin
        rundeps:
            - "%(name)-plugins-base"
        paths:
            - /usr/lib/vlc/plugins/keystore/libsecret_plugin.so

    - "%(name)-plugin-gstreamer":
        summary: VLC media player GStreamer codec plugin
        description: VLC media player GStreamer codec plugin
        rundeps:
            - "%(name)-plugins-base"
            - gstreamer-plugins-bad
        paths:
            - /usr/lib/vlc/plugins/codec/libgstdecode_plugin.so

    - "%(name)-plugin-kde":
        summary: VLC media player KWallet plugin
        description: VLC media player KWallet plugin
        rundeps:
            - "%(name)-plugins-base"
        paths:
            - /usr/lib/vlc/plugins/keystore/libkwallet_plugin.so

    - "%(name)-plugin-lua":
        summary: VLC media player lua scripting plugins
        description: VLC media player lua scripting plugins
        rundeps:
            - "%(name)-plugins-base"
        paths:
            - /usr/lib/vlc/lua/
            - /usr/lib/vlc/plugins/lua/
            - /usr/share/vlc/lua/

    - "%(name)-plugin-notify":
        summary: VLC media player notification plugin
        description: VLC media player notification plugin
        rundeps:
            - "%(name)-plugins-base"
        paths:
            - /usr/lib/vlc/plugins/notify/libnotify_plugin.so

    - "%(name)-plugin-pulseaudio":
        summary: VLC media player PulseAudio plugins
        description: VLC media player PulseAudio plugins
        rundeps:
            - "%(name)-plugins-base"
        paths:
            - /usr/lib/vlc/libvlc_pulse.so*
            - /usr/lib/vlc/plugins/access/libpulsesrc_plugin.so
            - /usr/lib/vlc/plugins/audio_output/libpulse_plugin.so
            - /usr/lib/vlc/plugins/services_discovery/libpulselist_plugin.so

    - "%(name)-plugin-samba":
        summary: VLC media player SMB plugin
        description: VLC media player SMB plugin
        rundeps:
            - "%(name)-plugins-base"
        paths:
            - /usr/lib/vlc/plugins/access/libsmb_plugin.so

    - "%(name)-plugin-svg":
        summary: VLC media player SVG plugins
        description: VLC media player SVG plugins
        rundeps:
            - "%(name)-plugins-base"
        paths:
            - /usr/lib/vlc/plugins/codec/libsvgdec_plugin.so
            - /usr/lib/vlc/plugins/text_renderer/libsvg_plugin.so

    - "%(name)-plugin-visualization":
        summary: VLC media player visualization plugins
        description: VLC media player visualization plugins
        rundeps:
            - "%(name)-plugins-base"
        paths:
            - /usr/lib/vlc/plugins/visualization/*.so

    - "%(name)-plugins-all":
        summary: VLC media player all plugins
        description: VLC media player all plugins
        rundeps:
            - "%(name)-plugins-base"
            - "%(name)-plugins-extra"
            - "%(name)-plugins-video-out"
            - "%(name)-plugin-ffmpeg"
            - "%(name)-plugin-gnome"
            - "%(name)-plugin-gstreamer"
            - "%(name)-plugin-kde"
            - "%(name)-plugin-lua"
            - "%(name)-plugin-notify"
            - "%(name)-plugin-pulseaudio"
            - "%(name)-plugin-samba"
            - "%(name)-plugin-svg"
            - "%(name)-plugin-visualization"
        paths:
            - /usr/share/doc/vlc-plugins-all/VIRTUAL

    - "%(name)":
        rundeps:
            - "%(name)-qt"
            - "%(name)-plugin-ffmpeg"
            - hicolor-icon-theme
        paths:
            - /usr/share/applications/vlc.desktop
