#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : tdb
version     : 1.4.14
release     : 4
homepage    : https://tdb.samba.org
upstreams   :
    - https://www.samba.org/ftp/tdb/tdb-1.4.14.tar.gz : 144f407d42ed7a0ec1470a40ef17ad41133fe910bce865dd9fe084d49c907526
summary     : Simple database API for Samba.
description : |
    This is a simple database API. It was inspired by the realisation that in Samba we have several ad-hoc bits of code that essentially implement small databases for sharing structures between parts of Samba. The interface is based on gdbm. gdbm couldn't be use as we needed to be able to have multiple writers to the databases at one time.
license     :
    - LGPL-3.0-or-later
builddeps   :
    - binary(ld.bfd)
    - binary(python)
    - binary(which)
environment : |
    # ld.bfd is required here, but we can still build with clang.
    export LDFLAGS="${LDFLAGS} -fuse-ld=bfd"
setup       : |
    # TODO: Figure out man pages
    %configure \
        --bundled-libraries=NONE \
        --builtin-libraries=replace \
        --disable-rpath-install \
        --disable-python
build       : |
    %make
install     : |
    %make_install
# icf unsupported with bfd
tuning      :
    - icf: false
packages    :
    - "%(name)-tools":
        summary: Developer tools for the Tdb library
        description: Developer tools for the Tdb library
        paths:
            - /usr/bin/
